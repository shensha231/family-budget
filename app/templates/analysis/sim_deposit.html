{% extends "base.html" %}
{% block title %}Вклад · Симулятор{% endblock %}
{% block content %}
<div class="container py-5">
  <div class="fb-card p-4">
    <h1 class="h5 mb-3">Вклад: простые и сложные проценты</h1>
    <form method="post" class="row g-3 mb-3">
      <div class="col-md-3">
        <label class="form-label">Сумма (₽)</label>
        <input type="number" step="0.01" name="principal" class="form-control" required>
      </div>
      <div class="col-md-3">
        <label class="form-label">Ставка (% годовых)</label>
        <input type="number" step="0.01" name="rate" class="form-control" required>
      </div>
      <div class="col-md-3">
        <label class="form-label">Срок (лет)</label>
        <input type="number" step="0.25" name="years" class="form-control" required>
      </div>
      <div class="col-md-3">
        <label class="form-label">Тип процентов</label>
        <select name="interest_kind" class="form-select">
          <option value="simple">Простые</option>
          <option value="compound" selected>Сложные</option>
        </select>
      </div>
      <div class="col-md-3">
        <label class="form-label">Начислений в год (m)</label>
        <input type="number" name="periods_per_year" class="form-control" value="1" min="1">
      </div>
      <div class="col-md-3 d-flex align-items-end">
        <button type="submit" class="btn btn-fb-primary w-100">Рассчитать</button>
      </div>
      <div class="col-md-3 d-flex align-items-end">
        <a href="{{ url_for('analysis.simulator_menu') }}" class="btn btn-fb-outline w-100">Назад к выбору</a>
      </div>
    </form>

    {% if result %}
      <p class="mb-1">
        Вклад {{ result.principal }} ₽ под {{ "%.2f"|format(result.rate) }} % на {{ result.years }} лет.
      </p>
      <p class="mb-1">
        Тип процентов:
        {% if result.kind == 'simple' %}
          простые (Cn = C0 · (1 + n · i)).
        {% else %}
          сложные (Cn = C0 · (1 + i/m)<sup>m·n</sup>, m = {{ result.periods_per_year }}).
        {% endif %}
      </p>
      <p class="mb-0">
        Итоговая сумма:
        <span class="text-income fw-semibold">
          {{ "%.2f"|format(result.future_value) }} ₽
        </span>
      </p>
    {% endif %}
  </div>
</div>
{% endblock %}
