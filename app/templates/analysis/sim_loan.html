{% extends "base.html" %}
{% block title %}Кредит (аннуитет) · Симулятор{% endblock %}
{% block content %}
<div class="container py-5">
  <div class="fb-card p-4">
    <h1 class="h5 mb-3">Кредит (аннуитетный платёж)</h1>
    <form method="post" class="row g-3 mb-3">
      <div class="col-md-3">
        <label class="form-label">Сумма кредита (₽)</label>
        <input type="number" step="0.01" name="principal" class="form-control" required>
      </div>
      <div class="col-md-3">
        <label class="form-label">Ставка (% годовых)</label>
        <input type="number" step="0.01" name="rate" class="form-control" required>
      </div>
      <div class="col-md-3">
        <label class="form-label">Срок (лет)</label>
        <input type="number" step="0.25" name="years" class="form-control" required>
      </div>
      <div class="col-md-3 d-flex align-items-end">
        <button type="submit" class="btn btn-fb-primary w-100">Рассчитать</button>
      </div>
      <div class="col-md-3 d-flex align-items-end">
        <a href="{{ url_for('analysis.simulator_menu') }}" class="btn btn-fb-outline w-100">Назад к выбору</a>
      </div>
    </form>

    {% if result %}
      <p class="mb-1">
        Кредит {{ result.principal }} ₽ под {{ "%.2f"|format(result.rate) }} %
        на {{ result.years }} лет.
      </p>
      <ul class="mb-0">
        <li>Ежемесячный платёж: <strong>{{ "%.2f"|format(result.payment) }} ₽</strong></li>
        <li>Всего будет выплачено: <strong>{{ "%.2f"|format(result.total_paid) }} ₽</strong></li>
        <li>Переплата: <strong class="text-expense">{{ "%.2f"|format(result.overpay) }} ₽</strong></li>
      </ul>
    {% endif %}
  </div>
</div>
{% endblock %}
